Алгоритм:
Регулярное выражение подается в обратной польской записи.
Алгоритм берет первый элемент в записи и в зависимости от того, что это за элемент,
решает, что с ним делать. Алгоритм также хранит стек, в который складывает элементы по ходу.
Если элемент - буква или пустое слово (1), то создается специальный объект - Node,
хранящий два булевских значения:
может ли этот объект содержать префикс из k подряд лежащих букв x (далее - А),
может ли этот объект быть словом, состоящим только из буквы x (в том числе длины 0) (далее - Б)
и одно численное значение - максимальная длина префикса, состоящего только из букв x (>=0) (далее - В).
Для букв значения А, Б и В определяются очевидным образов в зависимости от того, требуемая ли это буква.
Если требуемая, то В = 1, Б - истина, А - ложь, если k > 1.
Если не требуемая, то В = 0, Б - ложь, А - ложь.
Для 1 (пустого слова) А - ложь (если k>0), Б - истина, В = 0.
Если элемент - оператор *, то из стека берется объект, к которому применяется операция *:
1) Б объекта - истина, тогда объект может состоять из одних букв x, поэтому Б остается истиной,
В становится В*k (Чтобы префикс точно существовал, но если В = 0, то оно осталось равно 0).
Если В >= k, то А - истина
2) Б - ложь, А - истина, тогда все значения остаются такими же
(от дублирования слова вида x…xy… префикс x не увеличится)
3) А и Б ложны, тогда В = 0, Б - истина
(можно сделать пустое слово, оно будет выгоднее, чем слово с префиксом меньше требуемого)
Если элемент - + или ., то из стека берутся два объекта.
В случае конкатенации рассматривается первый объект О1 (он находится левее).
Если у О1 Б - истина, и у второго объекта О2 Б - истина, то у суммы Б - истина (иначе - ложь).
Если у О1 Б - истина, В = В1 + В2. Если В больше k, то А - истина, иначе ложь.
Если у О1 Б - ложь, то В = В1, А = А1.
В случае сложения рассматриваем как бы объединение.
Если А1 или А2, то А - истина (иначе - ложь). В = max(В1, В2).
Б - истина, если В > k.
Если при вызове оператора в стеке недостаточно объектов для проведения операции или по окончанию цикла
в стеке больше одного объекта или символ в строке не из алфавита или k < 0, возникает ошибка.
Когда цикл по строке закончен, в стеке должен остаться один объект - результат прохода
по всему регулярному выражению слева направо (так как оно записано в обратной польской записи).
Если у этого объекта А - истина, то ответ - YES, иначе - NO.
Корректность алгоритма следует из того, что корректны база и переходы (при вызове операторов),
корректность переходов очевидна из построения.
Асимптотика соблюдается, так как мы линейно проходимся по регулярному выражению
и делаем на каждом шаге константное число действий.
